<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>后台管理系统</title>

<link th:href="@{/css/bootstrap.min.css}" rel="stylesheet">
<link th:href="@{/css/datepicker3.css}" rel="stylesheet">
<link th:href="@{/css/styles.css}" rel="stylesheet">

<!--[if lt IE 9]>
<script src="js/html5shiv.js"></script>
<script src="js/respond.min.js"></script>
<![endif]-->

</head>

<body>
	<nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
		<div class="container-fluid">
			<div class="navbar-header">
				<button type="button" class="navbar-toggle collapsed"
					data-toggle="collapse" data-target="#sidebar-collapse">
					<span class="sr-only">后台管理系统</span> <span class="icon-bar"></span>
					<span class="icon-bar"></span> <span class="icon-bar"></span>
				</button>
				<a class="navbar-brand" href="#"><span>后台管理系统</span></a>
				<ul class="user-menu">
					<li class="dropdown pull-right"><a href="#"
						class="dropdown-toggle" data-toggle="dropdown"><span
							class="glyphicon glyphicon-user"></span> <label id="unam">{{details()}}</label>
							<span class="caret"></span></a>
						<ul class="dropdown-menu" role="menu">
							<li><a href="#"><span class="glyphicon glyphicon-user"></span>
									用户</a></li>
							<li><a href="#"><span class="glyphicon glyphicon-cog"></span>
									设置</a></li>
							<li><a href="#"><span
									class="glyphicon glyphicon-log-out"></span> 退出</a></li>
						</ul></li>
				</ul>
			</div>
		</div>
		<!-- /.container-fluid -->
	</nav>

	<div id="sidebar-collapse" class="col-sm-3 col-lg-2 sidebar">
		<form role="search">
			<div class="form-group">
				<input type="text" class="form-control" placeholder="Search">
			</div>
		</form>
		<ul class="nav menu">
			<li class="active"><a href="index.html"><span
					class="glyphicon glyphicon-dashboard"></span>信息统计</a></li>
			<li><a href="widgets.html"><span
					class="glyphicon glyphicon-th"></span> 2</a></li>
			<li><a href="charts.html"><span
					class="glyphicon glyphicon-stats"></span> 3</a></li>
			<li><a href="tables.html"><span
					class="glyphicon glyphicon-list-alt"></span> 4</a></li>
			<li><a href="forms.html"><span
					class="glyphicon glyphicon-pencil"></span> 5</a></li>
			<li><a href="panels.html"><span
					class="glyphicon glyphicon-info-sign"></span> 6</a></li>
			<li class="parent "><a href="#"> <span
					class="glyphicon glyphicon-list"></span> Dropdown <span
					data-toggle="collapse" href="#sub-item-1" class="icon pull-right"><em
						class="glyphicon glyphicon-s glyphicon-plus"></em></span>
			</a>
				<ul class="children collapse" id="sub-item-1">
					<li><a class="" href="#"> <span
							class="glyphicon glyphicon-share-alt"></span> Sub Item 1
					</a></li>
					<li><a class="" href="#"> <span
							class="glyphicon glyphicon-share-alt"></span> Sub Item 2
					</a></li>
					<li><a class="" href="#"> <span
							class="glyphicon glyphicon-share-alt"></span> Sub Item 3
					</a></li>
				</ul></li>
			<li role="presentation" class="divider"></li>
			<li><a href="login.html"><span
					class="glyphicon glyphicon-user"></span> Login Page</a></li>
		</ul>
	</div>
	<!--/.sidebar-->

	<div class="col-sm-9 col-sm-offset-3 col-lg-10 col-lg-offset-2 main">
		<div class="row">
			<ol class="breadcrumb">
				<li><a href="#"><span class="glyphicon glyphicon-home"></span></a></li>
				<li class="active">信息统计</li>
			</ol>
		</div>
		<!--/.row-->

		<div class="row">
			<div class="col-lg-12">
				<h1 class="page-header">信息统计</h1>
			</div>
		</div>
		<!--/.row-->



		<div class="row" id="messagecount">
			<div class="col-xs-12 col-md-6 col-lg-3">
				<div class="panel panel-blue panel-widget ">
					<div class="row no-padding">
						<div class="col-sm-3 col-lg-5 widget-left">
							<em class="glyphicon glyphicon-shopping-cart glyphicon-l"></em>
						</div>
						<div class="col-sm-9 col-lg-7 widget-right">
							<div class="large">{{goodscount}}</div>
							<div class="text-muted">失物数</div>
						</div>
					</div>
				</div>
			</div>
			<div class="col-xs-12 col-md-6 col-lg-3">
				<div class="panel panel-orange panel-widget">
					<div class="row no-padding">
						<div class="col-sm-3 col-lg-5 widget-left">
							<em class="glyphicon glyphicon-comment glyphicon-l"></em>
						</div>
						<div class="col-sm-9 col-lg-7 widget-right">
							<div class="large" v-model="mboardCount">{{mboardCount}}</div>
							<div class="text-muted">留言数</div>
						</div>
					</div>
				</div>
			</div>
			<div class="col-xs-12 col-md-6 col-lg-3">
				<div class="panel panel-teal panel-widget">
					<div class="row no-padding">
						<div class="col-sm-3 col-lg-5 widget-left">
							<em class="glyphicon glyphicon-user glyphicon-l"></em>
						</div>
						<div class="col-sm-9 col-lg-7 widget-right">
							<div class="large">{{usercount}}</div>
							<div class="text-muted">用户数</div>
						</div>
					</div>
				</div>
			</div>
		
		</div>

		<div class="row">
			<div class="col-xs-6 col-md-3">
				<div class="panel panel-default">
					<div class="panel-body easypiechart-panel">
						<h4>New Orders</h4>
						<div class="easypiechart" id="easypiechart-blue" data-percent="92">
							<span class="percent">92%</span>
						</div>
					</div>
				</div>
			</div>
			<div class="col-xs-6 col-md-3">
				<div class="panel panel-default">
					<div class="panel-body easypiechart-panel">
						<h4>Comments</h4>
						<div class="easypiechart" id="easypiechart-orange"
							data-percent="65">
							<span class="percent">65%</span>
						</div>
					</div>
				</div>
			</div>
			<div class="col-xs-6 col-md-3">
				<div class="panel panel-default">
					<div class="panel-body easypiechart-panel">
						<h4>New Users</h4>
						<div class="easypiechart" id="easypiechart-teal" data-percent="56">
							<span class="percent">56%</span>
						</div>
					</div>
				</div>
			</div>
			<div class="col-xs-6 col-md-3">
				<div class="panel panel-default">
					<div class="panel-body easypiechart-panel">
						<h4>Visitors</h4>
						<div class="easypiechart" id="easypiechart-red" data-percent="27">
							<span class="percent">27%</span>
						</div>
					</div>
				</div>
			</div>
		</div>
		<!--/.row-->

		<div class="row" id="board">
			<div class="col-md-8">

				<div class="panel panel-default chat">
					<div class="panel-heading" id="accordion">
						<span class="glyphicon glyphicon-comment"></span> 留言板
					</div>
					<div class="panel-body">
						<ul>
							<li class="left clearfix" v-model="mboardlist" v-for="mbo in mboardlist">
							
							
							<span class="chat-img pull-left">
									<img src="http://placehold.it/80/30a5ff/fff" alt="User Avatar"
									class="img-circle" />
							</span>
								<div class="chat-body clearfix">
									<div class="header">
										<strong class="primary-font">{{mbo.nickname}}</strong> <small
											class="text-muted">{{mbo.time}}</small>
									</div>
									<p>{{mbo.content}}</p>
								</div>
								
								
							</li>
						</ul>
					</div>

					<div class="panel-footer">
						<div class="input-group">
							<input id="btn-input" type="text" class="form-control input-md"
								placeholder="请发送信息" v-model="content"  @keyup.enter="post2()"/> <span
								class="input-group-btn">
								<button class="btn btn-success btn-md" id="btn-chat" @click="post2()" >发送</button>
							</span>
						</div>
					</div>
				</div>

			</div>
			<!--/.col-->

			<div class="col-md-4">

				<div class="panel panel-blue">
					<div class="panel-heading dark-overlay">
						<span class="glyphicon glyphicon-check"></span>To-do List
					</div>
					<div class="panel-body">
						<ul class="todo-list">
							<li class="todo-list-item">
								<div class="checkbox">
									<input type="checkbox" id="checkbox" /> <label for="checkbox">Make
										a plan for today</label>
								</div>
								<div class="pull-right action-buttons">
									<a href="#"><span class="glyphicon glyphicon-pencil"></span></a>
									<a href="#" class="flag"><span
										class="glyphicon glyphicon-flag"></span></a> <a href="#"
										class="trash"><span class="glyphicon glyphicon-trash"></span></a>
								</div>
							</li>
							<li class="todo-list-item">
								<div class="checkbox">
									<input type="checkbox" id="checkbox" /> <label for="checkbox">Update
										Basecamp</label>
								</div>
								<div class="pull-right action-buttons">
									<a href="#"><span class="glyphicon glyphicon-pencil"></span></a>
									<a href="#" class="flag"><span
										class="glyphicon glyphicon-flag"></span></a> <a href="#"
										class="trash"><span class="glyphicon glyphicon-trash"></span></a>
								</div>
							</li>
							<li class="todo-list-item">
								<div class="checkbox">
									<input type="checkbox" id="checkbox" /> <label for="checkbox">Send
										email to Jane</label>
								</div>
								<div class="pull-right action-buttons">
									<a href="#"><span class="glyphicon glyphicon-pencil"></span></a>
									<a href="#" class="flag"><span
										class="glyphicon glyphicon-flag"></span></a> <a href="#"
										class="trash"><span class="glyphicon glyphicon-trash"></span></a>
								</div>
							</li>
							<li class="todo-list-item">
								<div class="checkbox">
									<input type="checkbox" id="checkbox" /> <label for="checkbox">Drink
										coffee</label>
								</div>
								<div class="pull-right action-buttons">
									<a href="#"><span class="glyphicon glyphicon-pencil"></span></a>
									<a href="#" class="flag"><span
										class="glyphicon glyphicon-flag"></span></a> <a href="#"
										class="trash"><span class="glyphicon glyphicon-trash"></span></a>
								</div>
							</li>
							<li class="todo-list-item">
								<div class="checkbox">
									<input type="checkbox" id="checkbox" /> <label for="checkbox">Do
										some work</label>
								</div>
								<div class="pull-right action-buttons">
									<a href="#"><span class="glyphicon glyphicon-pencil"></span></a>
									<a href="#" class="flag"><span
										class="glyphicon glyphicon-flag"></span></a> <a href="#"
										class="trash"><span class="glyphicon glyphicon-trash"></span></a>
								</div>
							</li>
							<li class="todo-list-item">
								<div class="checkbox">
									<input type="checkbox" id="checkbox" /> <label for="checkbox">Tidy
										up workspace</label>
								</div>
								<div class="pull-right action-buttons">
									<a href="#"><span class="glyphicon glyphicon-pencil"></span></a>
									<a href="#" class="flag"><span
										class="glyphicon glyphicon-flag"></span></a> <a href="#"
										class="trash"><span class="glyphicon glyphicon-trash"></span></a>
								</div>
							</li>
						</ul>
					</div>
					<div class="panel-footer">
						<div class="input-group">
							<input id="btn-input" type="text" class="form-control input-md"
								placeholder="Add new task" /> <span class="input-group-btn">
								<button class="btn btn-primary btn-md" id="btn-todo">Add</button>
							</span>
						</div>
					</div>
				</div>

			</div>
			<!--/.col-->
		</div>
		<!--/.row-->
	</div>
	<!--/.main-->

	<script th:src="@{/js/jquery-1.11.1.min.js}"></script>
	<script th:src="@{/js/bootstrap.min.js}"></script>
	<script th:src="@{/js/chart.min.js}"></script>
	<script th:src="@{/js/chart-data.js}"></script>
	<script th:src="@{/js/easypiechart.js}"></script>
	<script th:src="@{/js/easypiechart-data.js}"></script>
	<script th:src="@{/js/bootstrap-datepicker.js}"></script>
	<script th:src="@{/js/vue.min.js}"></script>
	<script th:src="@{/js/vue-resource.min.js}"></script>
	<script>
		new Vue({
			el : '#unam',
			data : {
				uname : ''
			},
			methods : {
				//获得用户昵称
				details : function() {
					return localStorage.getItem('nickname');
				}
			}
		})
		var mboard=new Vue({
			el: '#board',
			data :{
				mboardlist:{},
				username:'',
				content:'',
				nickname:''
			},
			methods:{
				//获得留言板列表
				post:function() {
					this.$http.get('http://localhost:8080/mboard/list',{emulateJSON : true}).then(function(res) {
					this.mboardlist=res.body.content;
					}, function(res) {
					console.log(res.status);
					});
				},
				//发送留言板信息
				post2 : function() {
				this.username=localStorage.getItem('username');
				this.nickname=localStorage.getItem('nickname');
				this.$http.post('http://localhost:8080/mboard/postcontent',{"username" : this.username,"content" : this.content,"nickname":this.nickname}, {emulateJSON : true}).then(
					function(res) {
						this.content='';
						mboard.post();
						a.post();
					}, function(res) {
								res.status;
						});
					}
				}
			
			
		})
		
		mboard.post();
		
		//获得数量
		var a=new Vue({
			el : '#messagecount',
			data : {
				usercount : '0',
				goodscount : '0',
				mboardCount : '0'
			},
			methods : {
				post:function() {
					this.$http.post('http://localhost:8080/message/getmessage',{emulateJSON : true}).then(function(res) {
					var msg = res.body;
					this.usercount=msg.userCount;
					this.goodscount=msg.goodsCount;
					this.mboardCount=msg.mboardCount;
				}, function(res) {
					console.log(res.status);
				});
				}
			}
		})
		a.post();
		
		$('#calendar').datepicker({});

		!function($) {
			$(document)
					.on(
							"click",
							"ul.nav li.parent > a > span.icon",
							function() {
								$(this).find('em:first').toggleClass(
										"glyphicon-minus");
							});
			$(".sidebar span.icon").find('em:first').addClass("glyphicon-plus");
		}(window.jQuery);

		$(window).on('resize', function() {
			if ($(window).width() > 768)
				$('#sidebar-collapse').collapse('show')
		})
		$(window).on('resize', function() {
			if ($(window).width() <= 767)
				$('#sidebar-collapse').collapse('hide')
		})
	</script>
</body>

</html>
